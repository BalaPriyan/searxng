{"version":3,"file":"searxng.min.js","sources":["../src/js/main/00_toolkit.js","../src/js/main/mapresult.js","../src/js/main/preferences.js","../src/js/main/results.js","../src/js/main/search.js","../../__common__/js/image_layout.js","../node_modules/autocomplete-js/dist/autocomplete.js"],"sourcesContent":["/**\n * @license\n * (C) Copyright Contributors to the SearXNG project.\n * (C) Copyright Contributors to the searx project (2014 - 2021).\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nwindow.searxng = (function (w, d) {\n\n  'use strict';\n\n  // not invented here tookit with bugs fixed elsewhere\n  // purposes : be just good enough and as small as possible\n\n  // from https://plainjs.com/javascript/events/live-binding-event-handlers-14/\n  if (w.Element) {\n    (function (ElementPrototype) {\n      ElementPrototype.matches = ElementPrototype.matches ||\n      ElementPrototype.matchesSelector ||\n      ElementPrototype.webkitMatchesSelector ||\n      ElementPrototype.msMatchesSelector ||\n      function (selector) {\n        var node = this, nodes = (node.parentNode || node.document).querySelectorAll(selector), i = -1;\n        while (nodes[++i] && nodes[i] != node);\n        return !!nodes[i];\n      };\n    })(Element.prototype);\n  }\n\n  function callbackSafe (callback, el, e) {\n    try {\n      callback.call(el, e);\n    } catch (exception) {\n      console.log(exception);\n    }\n  }\n\n  var searxng = window.searxng || {};\n\n  searxng.on = function (obj, eventType, callback, useCapture) {\n    useCapture = useCapture || false;\n    if (typeof obj !== 'string') {\n      // obj HTMLElement, HTMLDocument\n      obj.addEventListener(eventType, callback, useCapture);\n    } else {\n      // obj is a selector\n      d.addEventListener(eventType, function (e) {\n        var el = e.target || e.srcElement, found = false;\n        while (el && el.matches && el !== d && !(found = el.matches(obj))) el = el.parentElement;\n        if (found) callbackSafe(callback, el, e);\n      }, useCapture);\n    }\n  };\n\n  searxng.ready = function (callback) {\n    if (document.readyState != 'loading') {\n      callback.call(w);\n    } else {\n      w.addEventListener('DOMContentLoaded', callback.bind(w));\n    }\n  };\n\n  searxng.http = function (method, url) {\n    var req = new XMLHttpRequest(),\n      resolve = function () {},\n      reject = function () {},\n      promise = {\n        then: function (callback) { resolve = callback; return promise; },\n        catch: function (callback) { reject = callback; return promise; }\n      };\n\n    try {\n      req.open(method, url, true);\n\n      // On load\n      req.onload = function () {\n        if (req.status == 200) {\n          resolve(req.response, req.responseType);\n        } else {\n          reject(Error(req.statusText));\n        }\n      };\n\n      // Handle network errors\n      req.onerror = function () {\n        reject(Error(\"Network Error\"));\n      };\n\n      req.onabort = function () {\n        reject(Error(\"Transaction is aborted\"));\n      };\n\n      // Make the request\n      req.send();\n    } catch (ex) {\n      reject(ex);\n    }\n\n    return promise;\n  };\n\n  searxng.loadStyle = function (src) {\n    var path = searxng.static_path + src,\n      id = \"style_\" + src.replace('.', '_'),\n      s = d.getElementById(id);\n    if (s === null) {\n      s = d.createElement('link');\n      s.setAttribute('id', id);\n      s.setAttribute('rel', 'stylesheet');\n      s.setAttribute('type', 'text/css');\n      s.setAttribute('href', path);\n      d.body.appendChild(s);\n    }\n  };\n\n  searxng.loadScript = function (src, callback) {\n    var path = searxng.static_path + src,\n      id = \"script_\" + src.replace('.', '_'),\n      s = d.getElementById(id);\n    if (s === null) {\n      s = d.createElement('script');\n      s.setAttribute('id', id);\n      s.setAttribute('src', path);\n      s.onload = callback;\n      s.onerror = function () {\n        s.setAttribute('error', '1');\n      };\n      d.body.appendChild(s);\n    } else if (!s.hasAttribute('error')) {\n      try {\n        callback.apply(s, []);\n      } catch (exception) {\n        console.log(exception);\n      }\n    } else {\n      console.log(\"callback not executed : script '\" + path + \"' not loaded.\");\n    }\n  };\n\n  searxng.insertBefore = function (newNode, referenceNode) {\n    referenceNode.parentNode.insertBefore(newNode, referenceNode);\n  };\n\n  searxng.insertAfter = function (newNode, referenceNode) {\n    referenceNode.parentNode.insertAfter(newNode, referenceNode.nextSibling);\n  };\n\n  searxng.on('.close', 'click', function () {\n    this.parentNode.classList.add('invisible');\n  });\n\n  return searxng;\n})(window, document);\n","/* SPDX-License-Identifier: AGPL-3.0-or-later */\n/* global L */\n(function (w, d, searxng) {\n  'use strict';\n\n  searxng.ready(function () {\n    searxng.on('.searxng_init_map', 'click', function (event) {\n      // no more request\n      this.classList.remove(\"searxng_init_map\");\n\n      //\n      var leaflet_target = this.dataset.leafletTarget;\n      var map_lon = parseFloat(this.dataset.mapLon);\n      var map_lat = parseFloat(this.dataset.mapLat);\n      var map_zoom = parseFloat(this.dataset.mapZoom);\n      var map_boundingbox = JSON.parse(this.dataset.mapBoundingbox);\n      var map_geojson = JSON.parse(this.dataset.mapGeojson);\n\n      searxng.loadStyle('css/leaflet.css');\n      searxng.loadScript('js/leaflet.js', function () {\n        var map_bounds = null;\n        if (map_boundingbox) {\n          var southWest = L.latLng(map_boundingbox[0], map_boundingbox[2]);\n          var northEast = L.latLng(map_boundingbox[1], map_boundingbox[3]);\n          map_bounds = L.latLngBounds(southWest, northEast);\n        }\n\n        // init map\n        var map = L.map(leaflet_target);\n        // create the tile layer with correct attribution\n        var osmMapnikUrl = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';\n        var osmMapnikAttrib = 'Map data © <a href=\"https://openstreetmap.org\">OpenStreetMap</a> contributors';\n        var osmMapnik = new L.TileLayer(osmMapnikUrl, {minZoom: 1, maxZoom: 19, attribution: osmMapnikAttrib});\n        var osmWikimediaUrl = 'https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}.png';\n        var osmWikimediaAttrib = 'Wikimedia maps | Maps data © <a href=\"https://openstreetmap.org\">OpenStreetMap contributors</a>';\n        var osmWikimedia = new L.TileLayer(osmWikimediaUrl, {minZoom: 1, maxZoom: 19, attribution: osmWikimediaAttrib});\n        // init map view\n        if (map_bounds) {\n          // TODO hack: https://github.com/Leaflet/Leaflet/issues/2021\n          // Still useful ?\n          setTimeout(function () {\n            map.fitBounds(map_bounds, {\n              maxZoom: 17\n            });\n          }, 0);\n        } else if (map_lon && map_lat) {\n          if (map_zoom) {\n            map.setView(new L.latLng(map_lat, map_lon), map_zoom);\n          } else {\n            map.setView(new L.latLng(map_lat, map_lon), 8);\n          }\n        }\n\n        map.addLayer(osmMapnik);\n\n        var baseLayers = {\n          \"OSM Mapnik\": osmMapnik,\n          \"OSM Wikimedia\": osmWikimedia,\n        };\n\n        L.control.layers(baseLayers).addTo(map);\n\n        if (map_geojson) {\n          L.geoJson(map_geojson).addTo(map);\n        } /* else if(map_bounds) {\n          L.rectangle(map_bounds, {color: \"#ff7800\", weight: 3, fill:false}).addTo(map);\n        } */\n      });\n\n      // this event occour only once per element\n      event.preventDefault();\n    });\n  });\n})(window, document, window.searxng);\n","/* SPDX-License-Identifier: AGPL-3.0-or-later */\n(function (w, d, searxng) {\n  'use strict';\n\n  searxng.ready(function () {\n    let engine_descriptions = null;\n    function load_engine_descriptions () {\n      if (engine_descriptions == null) {\n        searxng.http(\"GET\", \"engine_descriptions.json\").then(function (content) {\n          engine_descriptions = JSON.parse(content);\n          for (const [engine_name, description] of Object.entries(engine_descriptions)) {\n            let elements = d.querySelectorAll('[data-engine-name=\"' + engine_name + '\"] .engine-description');\n            for (const element of elements) {\n              let source = ' (<i>' + searxng.translations['Source'] + ':&nbsp;' + description[1] + '</i>)';\n              element.innerHTML = description[0] + source;\n            }\n          }\n        });\n      }\n    }\n\n    if (d.querySelector('body[class=\"preferences_endpoint\"]')) {\n      for (const el of d.querySelectorAll('[data-engine-name]')) {\n        searxng.on(el, 'mouseenter', load_engine_descriptions);\n      }\n    }\n  });\n})(window, document, window.searxng);\n","/* SPDX-License-Identifier: AGPL-3.0-or-later */\n(function (w, d, searxng) {\n  'use strict';\n\n  searxng.ready(function () {\n    searxng.image_thumbnail_layout = new searxng.ImageLayout('#urls', '#urls .result-images', 'img.image_thumbnail', 14, 6, 200);\n    searxng.image_thumbnail_layout.watch();\n\n    d.querySelectorAll('#urls img.image').forEach(\n      img =>\n        img.addEventListener(\n          'error', () => {\n            img.style.display = 'none';\n            img.error = null;\n          }\n        ));\n\n    searxng.on('.btn-collapse', 'click', function () {\n      var btnLabelCollapsed = this.getAttribute('data-btn-text-collapsed');\n      var btnLabelNotCollapsed = this.getAttribute('data-btn-text-not-collapsed');\n      var target = this.getAttribute('data-target');\n      var targetElement = d.querySelector(target);\n      var html = this.innerHTML;\n      if (this.classList.contains('collapsed')) {\n        html = html.replace(btnLabelCollapsed, btnLabelNotCollapsed);\n      } else {\n        html = html.replace(btnLabelNotCollapsed, btnLabelCollapsed);\n      }\n      this.innerHTML = html;\n      this.classList.toggle('collapsed');\n      targetElement.classList.toggle('invisible');\n    });\n\n    searxng.on('.media-loader', 'click', function () {\n      var target = this.getAttribute('data-target');\n      var iframe_load = d.querySelector(target + ' > iframe');\n      var srctest = iframe_load.getAttribute('src');\n      if (srctest === null || srctest === undefined || srctest === false) {\n        iframe_load.setAttribute('src', iframe_load.getAttribute('data-src'));\n      }\n    });\n\n    searxng.selectImage = function (resultElement) {\n      /* eslint no-unused-vars: 0 */\n      if (resultElement) {\n        // load full size image in background\n        const imgElement = resultElement.querySelector('.result-images-source img');\n        const thumbnailElement = resultElement.querySelector('.image_thumbnail');\n        const detailElement = resultElement.querySelector('.detail');\n        if (imgElement) {\n          const imgSrc = imgElement.getAttribute('data-src');\n          if (imgSrc) {\n            const loader = d.createElement('div');\n            const imgLoader = new Image();\n\n            loader.classList.add('loader');\n            detailElement.appendChild(loader);\n\n            imgLoader.onload = e => {\n              imgElement.src = imgSrc;\n              loader.remove();\n            };\n            imgLoader.onerror = e => {\n              loader.remove();\n            };\n            imgLoader.src = imgSrc;\n            imgElement.src = thumbnailElement.src;\n            imgElement.removeAttribute('data-src');\n          }\n        }\n      }\n      d.getElementById('results').classList.add('image-detail-open');\n      searxng.image_thumbnail_layout.align();\n      searxng.scrollPageToSelected();\n    }\n\n    searxng.closeDetail = function (e) {\n      d.getElementById('results').classList.remove('image-detail-open');\n      searxng.image_thumbnail_layout.align();\n      searxng.scrollPageToSelected();\n    }\n    searxng.on('.result-detail-close', 'click', e => {\n      e.preventDefault();\n      searxng.closeDetail();\n    });\n    searxng.on('.result-detail-previous', 'click', e => searxng.selectPrevious(false));\n    searxng.on('.result-detail-next', 'click', e => searxng.selectNext(false));\n\n    w.addEventListener('scroll', function () {\n      var e = d.getElementById('backToTop'),\n        scrollTop = document.documentElement.scrollTop || document.body.scrollTop,\n        results = d.getElementById('results');\n      if (e !== null) {\n        if (scrollTop >= 100) {\n          results.classList.add('scrolling');\n        } else {\n          results.classList.remove('scrolling');\n        }\n      }\n    }, true);\n\n  });\n\n})(window, document, window.searxng);\n","/* SPDX-License-Identifier: AGPL-3.0-or-later */\n/* global AutoComplete */\n(function (w, d, searxng) {\n  'use strict';\n\n  var firstFocus = true, qinput_id = \"q\", qinput;\n\n  function placeCursorAtEnd (element) {\n    if (element.setSelectionRange) {\n      var len = element.value.length;\n      element.setSelectionRange(len, len);\n    }\n  }\n\n  function createClearButton (qinput) {\n    var cs = document.getElementById('clear_search');\n    var updateClearButton = function () {\n      if (qinput.value.length === 0) {\n        cs.classList.add(\"empty\");\n      } else {\n        cs.classList.remove(\"empty\");\n      }\n    };\n\n    // update status, event listener\n    updateClearButton();\n    cs.addEventListener('click', function () {\n      qinput.value = '';\n      qinput.focus();\n      updateClearButton();\n    });\n    qinput.addEventListener('keyup', updateClearButton, false);\n  }\n\n  searxng.ready(function () {\n    qinput = d.getElementById(qinput_id);\n\n    function placeCursorAtEndOnce () {\n      if (firstFocus) {\n        placeCursorAtEnd(qinput);\n        firstFocus = false;\n      } else {\n        // e.preventDefault();\n      }\n    }\n\n    if (qinput !== null) {\n      // clear button\n      createClearButton(qinput);\n\n      // autocompleter\n      if (searxng.autocompleter) {\n        searxng.autocomplete = AutoComplete.call(w, {\n          Url: \"./autocompleter\",\n          EmptyMessage: searxng.translations.no_item_found,\n          HttpMethod: searxng.method,\n          HttpHeaders: {\n            \"Content-type\": \"application/x-www-form-urlencoded\",\n            \"X-Requested-With\": \"XMLHttpRequest\"\n          },\n          MinChars: 4,\n          Delay: 300,\n          _Position: function () {\n            this.DOMResults.setAttribute(\"class\", \"autocomplete\");\n            this.DOMResults.style.top = (this.Input.offsetTop + this.Input.offsetHeight) + \"px\";\n            this.DOMResults.style.left = this.Input.offsetLeft + \"px\";\n            this.DOMResults.style.width = this.Input.clientWidth + \"px\";\n          },\n          _Open: function () {\n            var params = this;\n            Array.prototype.forEach.call(this.DOMResults.getElementsByTagName(\"li\"), function (li) {\n              if (li.getAttribute(\"class\") != \"locked\") {\n                li.onmousedown = function () {\n                  params._Select(li);\n                };\n              }\n            });\n          },\n        }, \"#\" + qinput_id);\n\n        // hack, see : https://github.com/autocompletejs/autocomplete.js/issues/37\n        w.addEventListener('resize', function () {\n          var event = new CustomEvent(\"position\");\n          qinput.dispatchEvent(event);\n        });\n      }\n\n      qinput.addEventListener('focus', placeCursorAtEndOnce, false);\n      qinput.focus();\n    }\n  });\n\n})(window, document, window.searxng);\n","/**\n*\n* Google Image Layout v0.0.1\n* Description, by Anh Trinh.\n* Heavily modified for searx\n* https://ptgamr.github.io/2014-09-12-google-image-layout/\n* https://ptgamr.github.io/google-image-layout/src/google-image-layout.js\n*\n* @license Free to use under the MIT License.\n*\n* @example <caption>Example usage of searxng.ImageLayout class.</caption>\n* searxng.image_thumbnail_layout = new searxng.ImageLayout(\n*     '#urls',                 // container_selector\n*     '#urls .result-images',  // results_selector\n*     'img.image_thumbnail',   // img_selector\n*     14,                      // verticalMargin\n*     6,                       // horizontalMargin\n*     200                      // maxHeight\n* );\n* searxng.image_thumbnail_layout.watch();\n*/\n\n\n(function (w, d) {\n  function ImageLayout (container_selector, results_selector, img_selector, verticalMargin, horizontalMargin, maxHeight) {\n    this.container_selector = container_selector;\n    this.results_selector = results_selector;\n    this.img_selector = img_selector;\n    this.verticalMargin = verticalMargin;\n    this.horizontalMargin = horizontalMargin;\n    this.maxHeight = maxHeight;\n    this.isAlignDone = true;\n  }\n\n  /**\n  * Get the height that make all images fit the container\n  *\n  * width = w1 + w2 + w3 + ... = r1*h + r2*h + r3*h + ...\n  *\n  * @param  {[type]} images the images to be calculated\n  * @param  {[type]} width  the container witdth\n  * @param  {[type]} margin the margin between each image\n  *\n  * @return {[type]}        the height\n  */\n  ImageLayout.prototype._getHeigth = function (images, width) {\n    var i, img;\n    var r = 0;\n\n    for (i = 0; i < images.length; i++) {\n      img = images[i];\n      if ((img.naturalWidth > 0) && (img.naturalHeight > 0)) {\n        r += img.naturalWidth / img.naturalHeight;\n      } else {\n        // assume that not loaded images are square\n        r += 1;\n      }\n    }\n\n    return (width - images.length * this.verticalMargin) / r; // have to round down because Firefox will automatically roundup value with number of decimals > 3\n  };\n\n  ImageLayout.prototype._setSize = function (images, height) {\n    var i, img, imgWidth;\n    var imagesLength = images.length, resultNode;\n\n    for (i = 0; i < imagesLength; i++) {\n      img = images[i];\n      if ((img.naturalWidth > 0) && (img.naturalHeight > 0)) {\n        imgWidth = height * img.naturalWidth / img.naturalHeight;\n      } else {\n        // not loaded image : make it square as _getHeigth said it\n        imgWidth = height;\n      }\n      img.style.width = imgWidth + 'px';\n      img.style.height = height + 'px';\n      img.style.marginLeft = this.horizontalMargin + 'px';\n      img.style.marginTop = this.horizontalMargin + 'px';\n      img.style.marginRight = this.verticalMargin - 7 + 'px'; // -4 is the negative margin of the inline element\n      img.style.marginBottom = this.verticalMargin - 7 + 'px';\n      resultNode = img.parentNode.parentNode;\n      if (!resultNode.classList.contains('js')) {\n        resultNode.classList.add('js');\n      }\n    }\n  };\n\n  ImageLayout.prototype._alignImgs = function (imgGroup) {\n    var isSearching, slice, i, h;\n    var containerElement = d.querySelector(this.container_selector);\n    var containerCompStyles = window.getComputedStyle(containerElement);\n    var containerPaddingLeft = parseInt(containerCompStyles.getPropertyValue('padding-left'), 10);\n    var containerPaddingRight = parseInt(containerCompStyles.getPropertyValue('padding-right'), 10);\n    var containerWidth = containerElement.clientWidth - containerPaddingLeft - containerPaddingRight;\n\n    while (imgGroup.length > 0) {\n      isSearching = true;\n      for (i = 1; i <= imgGroup.length && isSearching; i++) {\n        slice = imgGroup.slice(0, i);\n        h = this._getHeigth(slice, containerWidth);\n        if (h < this.maxHeight) {\n          this._setSize(slice, h);\n          // continue with the remaining images\n          imgGroup = imgGroup.slice(i);\n          isSearching = false;\n        }\n      }\n      if (isSearching) {\n        this._setSize(slice, Math.min(this.maxHeight, h));\n        break;\n      }\n    }\n  };\n\n  ImageLayout.prototype.align = function () {\n    var i;\n    var results_selectorNode = d.querySelectorAll(this.results_selector);\n    var results_length = results_selectorNode.length;\n    var previous = null;\n    var current = null;\n    var imgGroup = [];\n\n    for (i = 0; i < results_length; i++) {\n      current = results_selectorNode[i];\n      if (current.previousElementSibling !== previous && imgGroup.length > 0) {\n        // the current image is not connected to previous one\n        // so the current image is the start of a new group of images.\n        // so call _alignImgs to align the current group\n        this._alignImgs(imgGroup);\n        // and start a new empty group of images\n        imgGroup = [];\n      }\n      // add the current image to the group (only the img tag)\n      imgGroup.push(current.querySelector(this.img_selector));\n      // update the previous variable\n      previous = current;\n    }\n    // align the remaining images\n    if (imgGroup.length > 0) {\n      this._alignImgs(imgGroup);\n    }\n  };\n\n  ImageLayout.prototype.watch = function () {\n    var i, img;\n    var obj = this;\n    var results_nodes = d.querySelectorAll(this.results_selector);\n    var results_length = results_nodes.length;\n\n    function img_load_error (event) {\n      // console.log(\"ERROR can't load: \" + event.originalTarget.src);\n      event.originalTarget.src = w.searxng.static_path + w.searxng.theme.img_load_error;\n    }\n\n    function throttleAlign () {\n      if (obj.isAlignDone) {\n        obj.isAlignDone = false;\n        setTimeout(function () {\n          obj.align();\n          obj.isAlignDone = true;\n        }, 100);\n      }\n    }\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/Window/pageshow_event\n    w.addEventListener('pageshow', throttleAlign);\n    // https://developer.mozilla.org/en-US/docs/Web/API/FileReader/load_event\n    w.addEventListener('load', throttleAlign);\n    // https://developer.mozilla.org/en-US/docs/Web/API/Window/resize_event\n    w.addEventListener('resize', throttleAlign);\n\n    for (i = 0; i < results_length; i++) {\n      img = results_nodes[i].querySelector(this.img_selector);\n      if (img !== null && img !== undefined) {\n        img.addEventListener('load', throttleAlign);\n        // https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/onerror\n        img.addEventListener('error', throttleAlign);\n        if (w.searxng.theme.img_load_error) {\n          img.addEventListener('error', img_load_error, {once: true});\n        }\n      }\n    }\n  };\n\n  w.searxng.ImageLayout = ImageLayout;\n\n}(window, document));\n","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.AutoComplete = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n/*\n * @license MIT\n *\n * Autocomplete.js v2.7.1\n * Developed by Baptiste Donaux\n * http://autocomplete-js.com\n *\n * (c) 2017, Baptiste Donaux\n */\n\"use strict\";\nvar ConditionOperator;\n(function (ConditionOperator) {\n    ConditionOperator[ConditionOperator[\"AND\"] = 0] = \"AND\";\n    ConditionOperator[ConditionOperator[\"OR\"] = 1] = \"OR\";\n})(ConditionOperator || (ConditionOperator = {}));\nvar EventType;\n(function (EventType) {\n    EventType[EventType[\"KEYDOWN\"] = 0] = \"KEYDOWN\";\n    EventType[EventType[\"KEYUP\"] = 1] = \"KEYUP\";\n})(EventType || (EventType = {}));\n/**\n * Core\n *\n * @class\n * @author Baptiste Donaux <baptiste.donaux@gmail.com> @baptistedonaux\n */\nvar AutoComplete = /** @class */ (function () {\n    // Constructor\n    function AutoComplete(params, selector) {\n        if (params === void 0) { params = {}; }\n        if (selector === void 0) { selector = \"[data-autocomplete]\"; }\n        if (Array.isArray(selector)) {\n            selector.forEach(function (s) {\n                new AutoComplete(params, s);\n            });\n        }\n        else if (typeof selector == \"string\") {\n            var elements = document.querySelectorAll(selector);\n            Array.prototype.forEach.call(elements, function (input) {\n                new AutoComplete(params, input);\n            });\n        }\n        else {\n            var specificParams = AutoComplete.merge(AutoComplete.defaults, params, {\n                DOMResults: document.createElement(\"div\")\n            });\n            AutoComplete.prototype.create(specificParams, selector);\n            return specificParams;\n        }\n    }\n    AutoComplete.prototype.create = function (params, element) {\n        params.Input = element;\n        if (params.Input.nodeName.match(/^INPUT$/i) && (params.Input.hasAttribute(\"type\") === false || params.Input.getAttribute(\"type\").match(/^TEXT|SEARCH$/i))) {\n            params.Input.setAttribute(\"autocomplete\", \"off\");\n            params._Position(params);\n            params.Input.parentNode.appendChild(params.DOMResults);\n            params.$Listeners = {\n                blur: params._Blur.bind(params),\n                destroy: AutoComplete.prototype.destroy.bind(null, params),\n                focus: params._Focus.bind(params),\n                keyup: AutoComplete.prototype.event.bind(null, params, EventType.KEYUP),\n                keydown: AutoComplete.prototype.event.bind(null, params, EventType.KEYDOWN),\n                position: params._Position.bind(params)\n            };\n            for (var event in params.$Listeners) {\n                params.Input.addEventListener(event, params.$Listeners[event]);\n            }\n        }\n    };\n    AutoComplete.prototype.getEventsByType = function (params, type) {\n        var mappings = {};\n        for (var key in params.KeyboardMappings) {\n            var event = EventType.KEYUP;\n            if (params.KeyboardMappings[key].Event !== undefined) {\n                event = params.KeyboardMappings[key].Event;\n            }\n            if (event == type) {\n                mappings[key] = params.KeyboardMappings[key];\n            }\n        }\n        return mappings;\n    };\n    AutoComplete.prototype.event = function (params, type, event) {\n        var eventIdentifier = function (condition) {\n            if ((match === true && mapping.Operator == ConditionOperator.AND) || (match === false && mapping.Operator == ConditionOperator.OR)) {\n                condition = AutoComplete.merge({\n                    Not: false\n                }, condition);\n                if (condition.hasOwnProperty(\"Is\")) {\n                    if (condition.Is == event.keyCode) {\n                        match = !condition.Not;\n                    }\n                    else {\n                        match = condition.Not;\n                    }\n                }\n                else if (condition.hasOwnProperty(\"From\") && condition.hasOwnProperty(\"To\")) {\n                    if (event.keyCode >= condition.From && event.keyCode <= condition.To) {\n                        match = !condition.Not;\n                    }\n                    else {\n                        match = condition.Not;\n                    }\n                }\n            }\n        };\n        for (var name in AutoComplete.prototype.getEventsByType(params, type)) {\n            var mapping = AutoComplete.merge({\n                Operator: ConditionOperator.AND\n            }, params.KeyboardMappings[name]), match = ConditionOperator.AND == mapping.Operator;\n            mapping.Conditions.forEach(eventIdentifier);\n            if (match === true) {\n                mapping.Callback.call(params, event);\n            }\n        }\n    };\n    AutoComplete.prototype.makeRequest = function (params, callback, callbackErr) {\n        var propertyHttpHeaders = Object.getOwnPropertyNames(params.HttpHeaders), request = new XMLHttpRequest(), method = params._HttpMethod(), url = params._Url(), queryParams = params._Pre(), queryParamsStringify = encodeURIComponent(params._QueryArg()) + \"=\" + encodeURIComponent(queryParams);\n        if (method.match(/^GET$/i)) {\n            if (url.indexOf(\"?\") !== -1) {\n                url += \"&\" + queryParamsStringify;\n            }\n            else {\n                url += \"?\" + queryParamsStringify;\n            }\n        }\n        request.open(method, url, true);\n        for (var i = propertyHttpHeaders.length - 1; i >= 0; i--) {\n            request.setRequestHeader(propertyHttpHeaders[i], params.HttpHeaders[propertyHttpHeaders[i]]);\n        }\n        request.onreadystatechange = function () {\n            if (request.readyState == 4 && request.status == 200) {\n                params.$Cache[queryParams] = request.response;\n                callback(request.response);\n            }\n            else if (request.status >= 400) {\n                callbackErr();\n            }\n        };\n        return request;\n    };\n    AutoComplete.prototype.ajax = function (params, request, timeout) {\n        if (timeout === void 0) { timeout = true; }\n        if (params.$AjaxTimer) {\n            window.clearTimeout(params.$AjaxTimer);\n        }\n        if (timeout === true) {\n            params.$AjaxTimer = window.setTimeout(AutoComplete.prototype.ajax.bind(null, params, request, false), params.Delay);\n        }\n        else {\n            if (params.Request) {\n                params.Request.abort();\n            }\n            params.Request = request;\n            params.Request.send(params._QueryArg() + \"=\" + params._Pre());\n        }\n    };\n    AutoComplete.prototype.cache = function (params, callback, callbackErr) {\n        var response = params._Cache(params._Pre());\n        if (response === undefined) {\n            var request = AutoComplete.prototype.makeRequest(params, callback, callbackErr);\n            AutoComplete.prototype.ajax(params, request);\n        }\n        else {\n            callback(response);\n        }\n    };\n    AutoComplete.prototype.destroy = function (params) {\n        for (var event in params.$Listeners) {\n            params.Input.removeEventListener(event, params.$Listeners[event]);\n        }\n        params.DOMResults.parentNode.removeChild(params.DOMResults);\n    };\n    AutoComplete.merge = function () {\n        var merge = {}, tmp;\n        for (var i = 0; i < arguments.length; i++) {\n            for (tmp in arguments[i]) {\n                merge[tmp] = arguments[i][tmp];\n            }\n        }\n        return merge;\n    };\n    AutoComplete.defaults = {\n        Delay: 150,\n        EmptyMessage: \"No result here\",\n        Highlight: {\n            getRegex: function (value) {\n                return new RegExp(value, \"ig\");\n            },\n            transform: function (value) {\n                return \"<strong>\" + value + \"</strong>\";\n            }\n        },\n        HttpHeaders: {\n            \"Content-type\": \"application/x-www-form-urlencoded\"\n        },\n        Limit: 0,\n        MinChars: 0,\n        HttpMethod: \"GET\",\n        QueryArg: \"q\",\n        Url: null,\n        KeyboardMappings: {\n            \"Enter\": {\n                Conditions: [{\n                        Is: 13,\n                        Not: false\n                    }],\n                Callback: function (event) {\n                    if (this.DOMResults.getAttribute(\"class\").indexOf(\"open\") != -1) {\n                        var liActive = this.DOMResults.querySelector(\"li.active\");\n                        if (liActive !== null) {\n                            event.preventDefault();\n                            this._Select(liActive);\n                            this.DOMResults.setAttribute(\"class\", \"autocomplete\");\n                        }\n                    }\n                },\n                Operator: ConditionOperator.AND,\n                Event: EventType.KEYDOWN\n            },\n            \"KeyUpAndDown_down\": {\n                Conditions: [{\n                        Is: 38,\n                        Not: false\n                    },\n                    {\n                        Is: 40,\n                        Not: false\n                    }],\n                Callback: function (event) {\n                    event.preventDefault();\n                },\n                Operator: ConditionOperator.OR,\n                Event: EventType.KEYDOWN\n            },\n            \"KeyUpAndDown_up\": {\n                Conditions: [{\n                        Is: 38,\n                        Not: false\n                    },\n                    {\n                        Is: 40,\n                        Not: false\n                    }],\n                Callback: function (event) {\n                    event.preventDefault();\n                    var first = this.DOMResults.querySelector(\"li:first-child:not(.locked)\"), last = this.DOMResults.querySelector(\"li:last-child:not(.locked)\"), active = this.DOMResults.querySelector(\"li.active\");\n                    if (active) {\n                        var currentIndex = Array.prototype.indexOf.call(active.parentNode.children, active), position = currentIndex + (event.keyCode - 39), lisCount = this.DOMResults.getElementsByTagName(\"li\").length;\n                        if (position < 0) {\n                            position = lisCount - 1;\n                        }\n                        else if (position >= lisCount) {\n                            position = 0;\n                        }\n                        active.classList.remove(\"active\");\n                        active.parentElement.children.item(position).classList.add(\"active\");\n                    }\n                    else if (last && event.keyCode == 38) {\n                        last.classList.add(\"active\");\n                    }\n                    else if (first) {\n                        first.classList.add(\"active\");\n                    }\n                },\n                Operator: ConditionOperator.OR,\n                Event: EventType.KEYUP\n            },\n            \"AlphaNum\": {\n                Conditions: [{\n                        Is: 13,\n                        Not: true\n                    }, {\n                        From: 35,\n                        To: 40,\n                        Not: true\n                    }],\n                Callback: function () {\n                    var oldValue = this.Input.getAttribute(\"data-autocomplete-old-value\"), currentValue = this._Pre();\n                    if (currentValue !== \"\" && currentValue.length >= this._MinChars()) {\n                        if (!oldValue || currentValue != oldValue) {\n                            this.DOMResults.setAttribute(\"class\", \"autocomplete open\");\n                        }\n                        AutoComplete.prototype.cache(this, function (response) {\n                            this._Render(this._Post(response));\n                            this._Open();\n                        }.bind(this), this._Error);\n                    }\n                    else {\n                        this._Close();\n                    }\n                },\n                Operator: ConditionOperator.AND,\n                Event: EventType.KEYUP\n            }\n        },\n        DOMResults: null,\n        Request: null,\n        Input: null,\n        /**\n         * Return the message when no result returns\n         */\n        _EmptyMessage: function () {\n            var emptyMessage = \"\";\n            if (this.Input.hasAttribute(\"data-autocomplete-empty-message\")) {\n                emptyMessage = this.Input.getAttribute(\"data-autocomplete-empty-message\");\n            }\n            else if (this.EmptyMessage !== false) {\n                emptyMessage = this.EmptyMessage;\n            }\n            else {\n                emptyMessage = \"\";\n            }\n            return emptyMessage;\n        },\n        /**\n         * Returns the maximum number of results\n         */\n        _Limit: function () {\n            var limit = this.Input.getAttribute(\"data-autocomplete-limit\");\n            if (isNaN(limit) || limit === null) {\n                return this.Limit;\n            }\n            return parseInt(limit, 10);\n        },\n        /**\n         * Returns the minimum number of characters entered before firing ajax\n         */\n        _MinChars: function () {\n            var minchars = this.Input.getAttribute(\"data-autocomplete-minchars\");\n            if (isNaN(minchars) || minchars === null) {\n                return this.MinChars;\n            }\n            return parseInt(minchars, 10);\n        },\n        /**\n         * Apply transformation on labels response\n         */\n        _Highlight: function (label) {\n            return label.replace(this.Highlight.getRegex(this._Pre()), this.Highlight.transform);\n        },\n        /**\n         * Returns the HHTP method to use\n         */\n        _HttpMethod: function () {\n            if (this.Input.hasAttribute(\"data-autocomplete-method\")) {\n                return this.Input.getAttribute(\"data-autocomplete-method\");\n            }\n            return this.HttpMethod;\n        },\n        /**\n         * Returns the query param to use\n         */\n        _QueryArg: function () {\n            if (this.Input.hasAttribute(\"data-autocomplete-param-name\")) {\n                return this.Input.getAttribute(\"data-autocomplete-param-name\");\n            }\n            return this.QueryArg;\n        },\n        /**\n         * Returns the URL to use for AJAX request\n         */\n        _Url: function () {\n            if (this.Input.hasAttribute(\"data-autocomplete\")) {\n                return this.Input.getAttribute(\"data-autocomplete\");\n            }\n            return this.Url;\n        },\n        /**\n         * Manage the close\n         */\n        _Blur: function (now) {\n            if (now === void 0) { now = false; }\n            if (now) {\n                this._Close();\n            }\n            else {\n                var params = this;\n                setTimeout(function () {\n                    params._Blur(true);\n                }, 150);\n            }\n        },\n        /**\n         * Manage the cache\n         */\n        _Cache: function (value) {\n            return this.$Cache[value];\n        },\n        /**\n         * Manage the open\n         */\n        _Focus: function () {\n            var oldValue = this.Input.getAttribute(\"data-autocomplete-old-value\");\n            if ((!oldValue || this.Input.value != oldValue) && this._MinChars() <= this.Input.value.length) {\n                this.DOMResults.setAttribute(\"class\", \"autocomplete open\");\n            }\n        },\n        /**\n         * Bind all results item if one result is opened\n         */\n        _Open: function () {\n            var params = this;\n            Array.prototype.forEach.call(this.DOMResults.getElementsByTagName(\"li\"), function (li) {\n                if (li.getAttribute(\"class\") != \"locked\") {\n                    li.onclick = function () {\n                        params._Select(li);\n                    };\n                }\n            });\n        },\n        _Close: function () {\n            this.DOMResults.setAttribute(\"class\", \"autocomplete\");\n        },\n        /**\n         * Position the results HTML element\n         */\n        _Position: function () {\n            this.DOMResults.setAttribute(\"class\", \"autocomplete\");\n            this.DOMResults.setAttribute(\"style\", \"top:\" + (this.Input.offsetTop + this.Input.offsetHeight) + \"px;left:\" + this.Input.offsetLeft + \"px;width:\" + this.Input.clientWidth + \"px;\");\n        },\n        /**\n         * Execute the render of results DOM element\n         */\n        _Render: function (response) {\n            var ul;\n            if (typeof response == \"string\") {\n                ul = this._RenderRaw(response);\n            }\n            else {\n                ul = this._RenderResponseItems(response);\n            }\n            if (this.DOMResults.hasChildNodes()) {\n                this.DOMResults.removeChild(this.DOMResults.childNodes[0]);\n            }\n            this.DOMResults.appendChild(ul);\n        },\n        /**\n         * ResponseItems[] rendering\n         */\n        _RenderResponseItems: function (response) {\n            var ul = document.createElement(\"ul\"), li = document.createElement(\"li\"), limit = this._Limit();\n            // Order\n            if (limit < 0) {\n                response = response.reverse();\n            }\n            else if (limit === 0) {\n                limit = response.length;\n            }\n            for (var item = 0; item < Math.min(Math.abs(limit), response.length); item++) {\n                li.innerHTML = response[item].Label;\n                li.setAttribute(\"data-autocomplete-value\", response[item].Value);\n                ul.appendChild(li);\n                li = document.createElement(\"li\");\n            }\n            return ul;\n        },\n        /**\n         * string response rendering (RAW HTML)\n         */\n        _RenderRaw: function (response) {\n            var ul = document.createElement(\"ul\"), li = document.createElement(\"li\");\n            if (response.length > 0) {\n                this.DOMResults.innerHTML = response;\n            }\n            else {\n                var emptyMessage = this._EmptyMessage();\n                if (emptyMessage !== \"\") {\n                    li.innerHTML = emptyMessage;\n                    li.setAttribute(\"class\", \"locked\");\n                    ul.appendChild(li);\n                }\n            }\n            return ul;\n        },\n        /**\n         * Deal with request response\n         */\n        _Post: function (response) {\n            try {\n                var returnResponse = [];\n                //JSON return\n                var json = JSON.parse(response);\n                if (Object.keys(json).length === 0) {\n                    return \"\";\n                }\n                if (Array.isArray(json)) {\n                    for (var i = 0; i < Object.keys(json).length; i++) {\n                        returnResponse[returnResponse.length] = { \"Value\": json[i], \"Label\": this._Highlight(json[i]) };\n                    }\n                }\n                else {\n                    for (var value in json) {\n                        returnResponse.push({\n                            \"Value\": value,\n                            \"Label\": this._Highlight(json[value])\n                        });\n                    }\n                }\n                return returnResponse;\n            }\n            catch (event) {\n                //HTML return\n                return response;\n            }\n        },\n        /**\n         * Return the autocomplete value to send (before request)\n         */\n        _Pre: function () {\n            return this.Input.value;\n        },\n        /**\n         * Choice one result item\n         */\n        _Select: function (item) {\n            if (item.hasAttribute(\"data-autocomplete-value\")) {\n                this.Input.value = item.getAttribute(\"data-autocomplete-value\");\n            }\n            else {\n                this.Input.value = item.innerHTML;\n            }\n            this.Input.setAttribute(\"data-autocomplete-old-value\", this.Input.value);\n        },\n        /**\n         * Handle HTTP error on the request\n         */\n        _Error: function () {\n        },\n        $AjaxTimer: null,\n        $Cache: {},\n        $Listeners: {}\n    };\n    return AutoComplete;\n}());\nmodule.exports = AutoComplete;\n\n},{}]},{},[1])(1)\n});\n"],"names":["window","searxng","w","d","Element","ElementPrototype","matches","matchesSelector","webkitMatchesSelector","msMatchesSelector","selector","node","this","nodes","parentNode","document","querySelectorAll","i","prototype","callbackSafe","callback","el","e","call","exception","console","log","on","obj","eventType","useCapture","addEventListener","target","srcElement","found","parentElement","ready","readyState","bind","http","method","url","req","XMLHttpRequest","resolve","reject","promise","then","catch","open","onload","status","response","responseType","Error","statusText","onerror","onabort","send","ex","loadStyle","src","path","static_path","id","replace","s","getElementById","createElement","setAttribute","body","appendChild","loadScript","hasAttribute","apply","insertBefore","newNode","referenceNode","insertAfter","nextSibling","classList","add","event","remove","leaflet_target","dataset","leafletTarget","map_lon","parseFloat","mapLon","map_lat","mapLat","map_zoom","mapZoom","map_boundingbox","JSON","parse","mapBoundingbox","map_geojson","mapGeojson","map_bounds","southWest","L","latLng","northEast","latLngBounds","map","osmMapnikUrl","osmMapnikAttrib","osmMapnik","TileLayer","minZoom","maxZoom","attribution","osmWikimediaUrl","osmWikimediaAttrib","osmWikimedia","setTimeout","fitBounds","setView","addLayer","baseLayers","OSM Mapnik","OSM Wikimedia","control","layers","addTo","geoJson","preventDefault","let","engine_descriptions","load_engine_descriptions","content","engine_name","description","Object","entries","elements","element","source","translations","innerHTML","querySelector","image_thumbnail_layout","ImageLayout","watch","forEach","img","style","display","error","btnLabelCollapsed","getAttribute","btnLabelNotCollapsed","targetElement","html","contains","toggle","iframe_load","srctest","undefined","selectImage","resultElement","imgElement","thumbnailElement","detailElement","imgSrc","loader","imgLoader","Image","removeAttribute","align","scrollPageToSelected","closeDetail","selectPrevious","selectNext","scrollTop","documentElement","results","firstFocus","qinput_id","qinput","placeCursorAtEnd","setSelectionRange","len","value","length","createClearButton","cs","updateClearButton","focus","placeCursorAtEndOnce","autocompleter","autocomplete","AutoComplete","Url","EmptyMessage","no_item_found","HttpMethod","HttpHeaders","Content-type","X-Requested-With","MinChars","Delay","_Position","DOMResults","top","Input","offsetTop","offsetHeight","left","offsetLeft","width","clientWidth","_Open","params","Array","getElementsByTagName","li","onmousedown","_Select","CustomEvent","dispatchEvent","container_selector","results_selector","img_selector","verticalMargin","horizontalMargin","maxHeight","isAlignDone","_getHeigth","images","r","naturalWidth","naturalHeight","_setSize","height","imgWidth","imagesLength","resultNode","marginLeft","marginTop","marginRight","marginBottom","_alignImgs","imgGroup","isSearching","slice","h","containerElement","containerCompStyles","getComputedStyle","containerPaddingLeft","parseInt","getPropertyValue","containerPaddingRight","containerWidth","Math","min","results_selectorNode","results_length","previous","current","previousElementSibling","push","results_nodes","img_load_error","originalTarget","theme","throttleAlign","once","f","exports","module","define","amd","g","global","self","n","t","o","c","require","u","a","code","p","1","ConditionOperator","EventType","isArray","input","specificParams","merge","defaults","create","nodeName","match","$Listeners","blur","_Blur","destroy","_Focus","keyup","KEYUP","keydown","KEYDOWN","position","getEventsByType","type","mappings","key","KeyboardMappings","Event","eventIdentifier","condition","mapping","Operator","AND","OR","Not","hasOwnProperty","Is","keyCode","From","To","name","Conditions","Callback","makeRequest","callbackErr","propertyHttpHeaders","getOwnPropertyNames","request","_HttpMethod","_Url","queryParams","_Pre","queryParamsStringify","encodeURIComponent","_QueryArg","indexOf","setRequestHeader","onreadystatechange","$Cache","ajax","timeout","$AjaxTimer","clearTimeout","Request","abort","cache","_Cache","removeEventListener","removeChild","tmp","arguments","Highlight","getRegex","RegExp","transform","Limit","QueryArg","Enter","liActive","KeyUpAndDown_down","KeyUpAndDown_up","first","last","active","currentIndex","children","lisCount","item","AlphaNum","oldValue","currentValue","_MinChars","_Render","_Post","_Error","_Close","_EmptyMessage","emptyMessage","_Limit","limit","isNaN","minchars","_Highlight","label","now","onclick","ul","_RenderRaw","_RenderResponseItems","hasChildNodes","childNodes","reverse","abs","Label","Value","returnResponse","json","keys"],"mappings":"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"}